<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>我们为什么要开发一个开源的企业网站？</title>
	
	<meta name="author" content="dangjian">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/bootstrap/css/bootflat.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/dangjian">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://weibo.com/dangjian">
				<i class="fa fa-weibo"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:hunterdang@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/396f98e19be58c81f25060b4108595bd?s=35" class="slide-logo" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://images.china-pub.com/ebook3770001-3775000/3770903/zcover.jpg" class="slide-logo" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	SOLVING YOUR PROBLEMS BY MAKING YOUR OWN SOFTWARE!
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/dangjian">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="http://weibo.com/dangjian">
				<i class="fa fa-weibo fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:hunterdang@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<! -- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		
<div class="page-header clearfix">
  <h1>我们为什么要开发一个开源的企业网站？ </h1>
</div>

<article>
	<span class="post-date">
	   
	   November 
	   2nd,
	     
	   2014
	 </span>
	  <div class="article_body">
	  <h3 id="section">前言</h3>
<p><em>今年七月份，我和几个小伙伴们合伙建立了一个开发团队，取名为<strong>西安瑞木信息技术有限公司</strong>，英文名是<strong>eRealm</strong>。团队专注于Web开发，并提供Web开发的咨询及架构搭建。业务开展如火如荼的同时，团队宣传就提上了日程，作为正规军总不能没有宣传阵地吧。所以迫切需要搭建公司网站出来。</em></p>

<p><em>确定目标后我们就开始考虑如果构建一个公司企业网站。先是进行业内调查，看了看别人家的公司网站是怎么做的。总体来讲，国外网站的设计和使用的技术总能比国内高很大一截，国内很多公司，甚至是很多软件公司都不注重公司网站的构建，网站千篇一律，没有特色。很多公司网站都是使用Wordpress，然后自定义皮肤。也有一些设计类公司，网站页面做的很漂亮，设计也前卫，但是前端源代码写的一塌糊涂。我们起初的方案也是想使用Wordpress作为基础来设计公司网站，网站UI从已有开源的皮肤基础上修改。这样既能节省开发成本，又能体现独一无二。其实，刚开始也是这么做的，并且已经做出来了第一版了。只是实在是觉得和别人家的网站差别不大，太普通了，并且网站也没有任何体现我们专注于Web开发这一特质。权衡再三之后，决定从头开发一个企业网站出来，使用我们团队擅长的技术重新开发一个网站出来。决定前端使用<strong>AngularJS</strong>和<strong>Bootstrap</strong>构建，后端使用<strong>node.js</strong>和<strong>Express</strong>构建。经过一个多月的努力，我们的技术团队利用工作之余的时间终于完成的项目的第一版。下面将详细介绍这个项目的基础结构。</em></p>

<h3 id="section-1">项目整体介绍</h3>
<p>技术上，项目前端使用<strong>AngularJS</strong>和<strong>Bootstrap</strong>，后端使用<strong>node.js</strong>和<strong>Express</strong>。网站自动化构建工具使用<strong>grunt</strong>。网站整体应用了流行扁平化设计和响应式设计。当然，UI设计是我们团队的弱项，所以很多都是借鉴（~~抄袭~~）了别人的设计。网站前端代码基于<strong>HTML5</strong>，支持Chrome、Safari、Firefox及IE9+，使用IE8浏览器打开网站会自动跳转到引导用户下载现代浏览器的页面中。网站应用了<strong>响应式设计</strong>，所以在智能手机上也可以愉快地浏览。</p>

<p>项目是完全开源的，<strong>github</strong>上的地址是<a href="https://github.com/erealm/HomeSite">eRealm</a>，项目演示地址，也是我们公司的主页<a href="http://www.erealm.cn">eRealm Info &amp; Tech</a>。</p>

<h3 id="section-2">代码结构介绍</h3>
<p>推荐使用<strong>Webstorm</strong>打开项目。打开项目后，代码结构如下图所示：</p>

<p><img src="http://i.imgur.com/SjV97nF.png" alt="Imgur" /></p>

<p>在主体结构中从上到下介绍。<strong>app</strong>文件夹包含了所有后端代码；<strong>build</strong>文件夹中包含了最新数据库备份；<strong>config</strong>包含有网站整体的配置；<strong>logs</strong>文件夹包含网站后端记录的日志文件；<strong>node_modules</strong>是包含所有的<strong>node.js</strong>依赖包（源代码中初始没有此文件夹，运行<code>npm install</code>命令后所有加载的依赖包放置在此文件夹中）；<strong>public</strong>文件夹包含了所有的前端代码，包括JavaScript、less、图片、Webfont等；<strong>.bowerrc</strong>中定义了<a href="http://bower.io/"><strong>bower</strong></a>管理前端库的下载地址；<strong>bower.json</strong>则配置了项目需要的前端库；<strong>.jshintre-client</strong>和<strong>.jshintrc-server</strong>分别为前后端JavaScript代码规范检查规则；<strong>.travis.yml</strong>为[travis]（https://travis-ci.org/）自动编译配置；<strong>app.js</strong>为node.js启动脚本文件；<strong>build.sh</strong>为单独编写的自动发布bash命令；gruntfile.js为<a href="http://gruntjs.com"><strong>grunt</strong></a>配置文件；newrelic.js为<a href="http://newrelic.com"><strong>newrelic</strong></a>的配置文件，用于监控网站性能；<strong>package.json</strong>包含了所有node.js依赖包配置。</p>

<h3 id="section-3">项目后端结构介绍</h3>
<p>项目后端代码架构如下图所示：</p>

<p><img src="http://i.imgur.com/PMMGvUy.png" alt="Imgur" /></p>

<p>主要分为两大部分：<strong>app</strong>和<strong>config</strong>。<strong>app</strong>里面按照职责不同来分类，每个脚本文件对应于不同的模块；<strong>api</strong>文件夹包含了所有api对应的业务逻辑代码，<strong>helper</strong>放置一些公用方法，如邮件发送、日志记录、数据库连接等等；<strong>templates</strong>放置的是静态邮件模板；<strong>views</strong>是后端页面模板，使用了<strong>handlebar</strong>模板引擎，其中<strong>http</strong>中放置系统错误显示页面，<strong>layouts</strong>放置模板页；<strong>routes</strong>是<strong>express</strong>对应的路由配置，所有的页面和API的路由配置都在这个文件中。<strong>config</strong>文件夹中为系统配置，按照不同环境分为开发和现场两个环境配置，<strong>all.js</strong>放置共通配置，<strong>development.js</strong>放置开发环境对应配置而<strong>production.js</strong>放置线上环境配置。配置内容包括邮件发送、数据库连接及一些第三方API所需的key等等。</p>

<h3 id="section-4">项目前端结构介绍</h3>
<p>项目前端代码结构如下所示：</p>

<p><img src="http://i.imgur.com/4WEeYLg.png" alt="Imgur" /></p>

<p>前端代码全部放置于<strong>public</strong>文件夹下。<strong>data</strong>目录包含一些静态json格式数据，后期可能会考虑放到数据库中。<strong>helper</strong>中是浏览器下载引导页面；<strong>images</strong>包含了所有项目中用到的图片，我们尽量使用第三方的图片服务器保存图片，一些小图标也尽量使用webfont。<strong>JavaScripts</strong>文件夹包含所有JavaScript文件，其中<strong>app</strong>子目录放置业务代码，业务代码都是按照业务不同封装成了不同的<strong>angularjs</strong> controller；<strong>debug</strong>子目录放置调试用代码，而<strong>libs</strong>方式前端JavaScript库，项目中使用得JavaScript库有<strong>angularjs</strong>、<strong>jQuery</strong>及一些插件；<strong>clients.js</strong>是所有ajax请求函数；<strong>erealm.js</strong>是angularjs的主模块；<strong>language.js</strong>包含了所有多语言配置，目前支持中英文。<strong>stylesheets</strong>包含了所有的css样式及webfont，除了第三方库之外，自定义的样式全部使用了<strong>less</strong>。作为一种惯例，项目中添加了<strong>humans.txt</strong>文件，表明项目的作者信息。有关humans.txt，可以参考官方网站<a href="http://humanstxt.org">humans.txt</a>。</p>

<h3 id="section-5">自动化构建工具介绍</h3>
<p>项目自动化构建使用<strong>grunt</strong>。grunt的使用涉及开发、调试、发布阶段。开发阶段使用了图片压缩和前端代码格式美化，使用的工具是<strong>imagemin</strong>和<strong>jsbeautifier</strong>，运行<code>grunt prepare</code>命令。调试阶段使用了代码规范检查、less编译、自动添加浏览器前缀、自动加载运行nodejs并打开浏览器、实时监控代码变化并刷新页面等。开发中，使用<code>grunt</code>命令即可，为默认grunt命令。发布阶段包含了JavaScript及css合并压缩，并在文件路径上添加哈希值来避免浏览器缓存问题，同时删除开发环境中使用的代码，使用<code>grunt build</code>命令即可把代码切换为发布环境。</p>

<p>具体的使用grunt方法及相关工具的介绍，后期会有专门的技术文章讲解，这里不会详细设计技术细节。</p>

<h3 id="section-6">后期持续的改进点</h3>
<p>项目完成的比较仓促，但是我们尽量保持代码的整洁和可维护性，一些编码方式也借鉴当前流行的最佳实践。但理想是美好的，现实总是不会做到那么完美，需要不断的完善。目前存在的问题是后端代码结构不够清晰、整体代码中无用代码还没有来得及移除。框架上期望把<strong>jQuery</strong>去掉，只使用<strong>Angularjs</strong>，目前只做到了尽量不用<strong>jQuery</strong>中的方法。小图标的使用上<strong>Bootstrap</strong>和
<strong>Font Awesome</strong>重复，后期会逐步删除<strong>Font Awesome</strong>而只使用<strong>Bootstrap</strong>中带的小图标。目前，最大的问题是项目没有完整的自动化测试，这个后期会逐步添加。</p>

<h3 id="section-7">总结</h3>
<p>以上是这个开源项目的整体技术结构介绍。在这个项目中，我们会持续使用最流行的Web技术，希望得到大家的持续关注，如果有开发者能一块贡献一些代码，我们将会非常高兴。我们已经在github.io上构建了一个技术平台来发布Web技术文章，网址是blog.erealm.cn。博客网址也同样开源，使用了<a href="http://jekyllrb.com/"><strong>Jekyll</strong></a>构建。<strong>Jekyll</strong>非常强大，最大的特点是使用markdown格式来发布文章。博客的代码在这里：<a href="https://github.com/erealm/erealm.github.io">github</a>。</p>

<p>我们做这个开源的项目的目的有两个，其一是通过这个项目来展示我们做Web项目的实力，及培养团队技术水平。其二是借助这个项目，能和同行们有个技术上的互动和交流。如果我们的项目能让一些新手们学到一些做Web项目的经验，我们就很知足了。技术是不断革新的，而国内Web技术向来是落后于国外好几年，这个是不争的事实。我们erealm团队乐意为国内Web贡献自己的力量，也欢迎国内同行们和我们交流Web开发经验。</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#font-end-ref">
					font-end <span>(1)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#home-ref">
					home <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#web-ref">
					web <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#开源-ref">
					开源 <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#node.js-ref">
					node.js <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
          <a class="btn btn-default btn-sm weibo"
			 href="javascript:window.open('http://v.t.sina.com.cn/share/share.php?appkey=5699609071&url='+encodeURIComponent('http://blog.dang-jian.com/font-end/home/2014/11/02/erealm-home-opensource-nodejs.html')+'&ralateUid=1740070254&pic='+encodeURIComponent('')+'&title='+encodeURIComponent('我们为什么要开发一个开源的企业网站？'),'_blank','scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable=yes'); void 0">
              <i class="fa fa-weibo fa-lg"></i>
              新浪微博
          </a>
          <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=我们为什么要开发一个开源的企业网站？"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
      </section>

      <section class="col-sm-6 author">
		  <img src="http://www.gravatar.com/avatar/396f98e19be58c81f25060b4108595bd" class="img-rounded author-image" />
		  <div class="meta">
			  <h4 class="section-title author-name">党建</h4>
			  <a class="btn btn-link btn-sm" href="mailto:hunterdang@gmail.com">
				  <i class="fa fa-envelope fa-lg"></i>
			  </a>
		  </div>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous disabled"><a>&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/book/2015/01/15/web-frontend-development-best-practices-correct.html" title="《Web前端开发最佳实践》- 勘误">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	<div id="ds-thread" class="ds-thread" data-url="/font-end/home/2014/11/02/erealm-home-opensource-nodejs.html" data-title="我们为什么要开发一个开源的企业网站？" data-thread-key="我们为什么要开发一个开源的企业网站？"></div>
	<script type="text/javascript">
		var duoshuoQuery = {short_name: 'dangjian'};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = 'http://static.duoshuo.com/embed.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



		<footer>
			<hr/>
			<p>
				&copy; 2015 dangjian.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>

